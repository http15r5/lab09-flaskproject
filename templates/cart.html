{% extends 'base.html' %}
{% block title %}–ö–æ—à–∏–∫{% endblock %}
                                                 <!-- –∫–æ—Ä–∑–∏–Ω–∞ –∑—Ä–æ–±–∏–≤ (–î—ñ–º–∞ –ß–∞—Ä–∫—ñ–Ω),  –æ—Ñ–æ—Ä–º–∏–≤ (–ú–µ–ª—å–Ω–∏–∫ –°—Ç–∞–Ω—ñ—Å–ª–∞–≤)-->
{% block content %}
<script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
<div class="container mt-4">
  <h2 class="text-center mb-4">–í–∞—à –∫–æ—à–∏–∫</h2>


  {% if cart %}
  <table class="table table-striped">
    <thead>
      <tr>
        <th>–ù–∞–∑–≤–∞</th>
        <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
        <th>–¶—ñ–Ω–∞</th>
        <th>–°—É–º–∞</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for item in cart.values() %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.price }} $</td>
        <td>{{ item.price * item.quantity }} $</td>
        <td>
          <form action="{{ url_for('shop.remove_from_cart', product_id=item.id) }}" method="POST">
            <button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <p><strong>–†–∞–∑–æ–º:</strong> {{ total }} $</p>
  {% if discount %}
  <p class="text-success">
    –ó–Ω–∏–∂–∫–∞ {{ discount }}% ‚Üí <strong>–ü—ñ—Å–ª—è –∑–Ω–∏–∂–∫–∏:</strong> {{ discounted_total }} $
  </p>
  {% endif %}

  <form method="POST" action="{{ url_for('shop.apply_promo') }}" class="mt-3">
    <label>–ü—Ä–æ–º–æ–∫–æ–¥:</label>
    <input type="text" name="promo_code" class="form-control d-inline w-50" placeholder="–í–≤–µ–¥—ñ—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥...">
    <button type="submit" class="btn btn-primary mt-2">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
  </form>

  <form action="{{ url_for('shop.checkout') }}" method="POST" class="mt-4">
    <input type="email" name="email" placeholder="Email" required class="form-control mb-2">
    <input type="text" name="address" placeholder="–ê–¥—Ä–µ—Å–∞" required class="form-control mb-2">
    <button type="submit" class="btn btn-success">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
  </form>

  {% else %}
  <p class="text-center mt-4">–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</p>
  {% endif %}
</div>
{% endblock %}
